<script>
  document.addEventListener("DOMContentLoaded", function () {
    const fileInput = document.querySelector('#collection_dependency_file');
    const repoInput = document.querySelector('#collection_github_repo_url');
    const form = fileInput.closest("form");

    form.addEventListener("submit", function (e) {
      // only check if form passes built-in validations
      if (form.checkValidity()) {
        if (!fileInput.value && !repoInput.value) {
          e.preventDefault();
          // make it fail validation-style
          repoInput.setCustomValidity("Provide a GitHub repo URL or upload a dependency file.");
          repoInput.reportValidity();
        } else {
          // clear any previous custom error
          repoInput.setCustomValidity("");
        }
      }
    });
  });
</script>

<div class="form-group mb-3">
  <%= f.label :dependency_file, "Upload Dependency File" %>
  <%= f.file_field :dependency_file, class: "form-control" %>
</div>

<div class="form-group mb-3">
  <%= f.label :github_repo_url, "GitHub Repository URL (optional if uploading file)" %>
  <%= f.text_field :github_repo_url, class: "form-control", placeholder: "https://github.com/your/repo" %>
</div>

<div class="form-group mb-3">
  <%= f.label :name, "Name" %>
  <%= f.text_field :name, class: "form-control", placeholder: "Enter name" %>
</div>

<div class="form-group mb-3">
  <%= f.label :description, "Description" %>
  <%= f.text_area :description, class: "form-control", placeholder: "Enter description" %>
</div>

<div class="form-group mb-3">
  <%= f.label :visibility, "Visibility" %><br>
  <%= f.radio_button :visibility, "public" %> Public
  <%= f.radio_button :visibility, "private" %> Private
</div>